// FuelVM.c
// Generated by decompiling D:\dev\uxmal\reko\master\subjects\FuelVM\FuelVM.exe
// using Decompiler version 0.5.5.0.

#include "FuelVM.h"

void fn00401000(word32 edx, word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	Mem6[0x00403180:word32] = GetModuleHandleA(0x00);
	DialogBoxParamA(Mem6[0x00403180:word32], 1004, 0x00, 4198444, 0x00);
	ExitProcess(0x00);
	if (dwArg08 == 0x0110)
	{
		Mem53[fp - 0x08 + 0x00:word32] = 0x53;
		Mem55[fp - 0x0C + 0x00:word32] = 0x00;
		Mem57[fp - 0x10 + 0x00:word32] = 0x00;
		SetWindowPos(dwArg04, 0x00, 0x00, 0x00, 1004, 0x00, 4198444);
		Mem70[fp - 0x08 + 0x00:word32] = 2001;
		Mem72[fp - 0x0C + 0x00:word32] = Mem70[0x00403180:word32];
		Mem76[fp - 0x08 + 0x00:word32] = LoadBitmapA(0x00, 4198444);
		Mem79[0x00403194:word32] = CreatePatternBrush(4198444);
		Mem81[fp - 0x08 + 0x00:word32] = 0x0A;
		Mem83[fp - 0x0C + 0x00:word32] = 2002;
		Mem85[fp - 0x10 + 0x00:word32] = Mem83[0x00403180:word32];
		Mem88[0x00403184:word32] = FindResourceA(1004, 0x00, 4198444);
		Mem90[fp - 0x08 + 0x00:word32] = Mem88[0x00403184:word32];
		Mem92[fp - 0x0C + 0x00:word32] = Mem90[0x00403180:word32];
		Mem95[0x00403188:word32] = LoadResource(0x00, 4198444);
		Mem97[fp - 0x08 + 0x00:word32] = Mem95[0x00403184:word32];
		Mem99[fp - 0x0C + 0x00:word32] = Mem97[0x00403180:word32];
		Mem102[0x00403190:word32] = SizeofResource(0x00, 4198444);
		Mem104[fp - 0x08 + 0x00:word32] = Mem102[0x00403188:word32];
		Mem107[0x0040318C:word32] = LockResource(4198444);
		Mem109[fp - 0x08 + 0x00:word32] = Mem107[0x0040318C:word32];
		Mem111[fp - 0x0C + 0x00:word32] = Mem109[0x00403190:word32];
		Mem113[fp - 0x10 + 0x00:word32] = 0x00;
		word32 eax_n = ExtCreateRegion(1004, 0x00, 4198444);
		Mem117[fp - 0x08 + 0x00:word32] = 0x01;
		Mem119[fp - 0x0C + 0x00:word32] = eax_n;
		Mem121[fp - 0x10 + 0x00:word32] = dwArg04;
		SetWindowRgn(1004, 0x00, 4198444);
		Mem125[fp - 0x08 + 0x00:word32] = 0x01;
		Mem127[fp - 0x0C + 0x00:word32] = dwArg04;
		ShowWindow(0x00, 4198444);
	}
	else
	{
		if (dwArg08 == 0x0136)
			return;
		if (dwArg08 == 0x0F)
		{
			Mem144[fp - 0x08 + 0x00:word32] = 0x01;
			Mem146[fp - 0x0C + 0x00:word32] = 0x00;
			Mem148[fp - 0x10 + 0x00:word32] = dwArg04;
			InvalidateRect(1004, 0x00, 4198444);
			Mem152[fp - 0x08 + 0x00:word32] = dwArg04;
			UpdateWindow(4198444);
			Mem156[fp - 0x08 + 0x00:word32] = 0x01;
			Mem158[fp - 0x0C + 0x00:word32] = dwArg04;
			ShowWindow(0x00, 4198444);
			return;
		}
		if (dwArg08 == 0x0111)
			if (dwArg0C == 1010)
			{
				Mem170[fp - 0x08 + 0x00:word32] = 0x0C;
				Mem172[fp - 0x0C + 0x00:word32] = 4207000;
				Mem174[fp - 0x10 + 0x00:word32] = 1016;
				GetDlgItemTextA(dwArg04, 1004, 0x00, 4198444);
				Mem180[fp - 0x08 + 0x00:word32] = 0x0C;
				Mem182[fp - 0x0C + 0x00:word32] = 4207024;
				Mem184[fp - 0x10 + 0x00:word32] = 1017;
				GetDlgItemTextA(dwArg04, 1004, 0x00, 4198444);
				Mem189[0x004031CC:byte] = 0x00;
				fn00401238(edx);
			}
			else if (dwArg0C == 1018)
			{
				Mem194[fp - 0x08 + 0x00:word32] = 0x00;
				Mem196[fp - 0x0C + 0x00:word32] = 0x00;
				Mem198[fp - 0x10 + 0x00:word32] = 0x10;
				SendMessageA(dwArg04, 1004, 0x00, 4198444);
			}
		else if (dwArg08 == 0x10)
		{
			Mem206[fp - 0x08 + 0x00:word32] = 0x00090000;
			Mem208[fp - 0x0C + 0x00:word32] = 1000;
			Mem210[fp - 0x10 + 0x00:word32] = dwArg04;
			AnimateWindow(1004, 0x00, 4198444);
			Mem214[fp - 0x08 + 0x00:word32] = Mem210[0x00403194:word32];
			DeleteObject(4198444);
			Mem218[fp - 0x08 + 0x00:word32] = 0x00;
			Mem220[fp - 0x0C + 0x00:word32] = dwArg04;
			EndDialog(0x00, 4198444);
		}
	}
	return;
}

word32 fn004011C2(word32 dwArg04)
{
	word32 edi_n = dwArg04;
	word32 ecx_n = ~0x00;
	if (ecx_n != 0x00)
	{
		edi_n = edi_n + 0x01;
		ecx_n = ecx_n - 0x01;
		word32 edi_n = edi_n;
		if (0x00 != Mem0[edi_n + 0x00:byte])
			goto l004011CF;
	}
	return ~ecx_n - 0x01;
}

void fn004011D8()
{
	Mem4[0x004035CF:word32] = 0x00;
	Mem5[4208087:word32] = 0x00;
	Mem6[0x004035DF:word32] = 0x00;
	Mem14[0x004035E7:word32] = (word32) Mem6[(word32) Mem6[0x004031CC:byte] + 4207000:byte];
	Mem15[4208111:word32] = 0x32;
	Mem16[0x004035FF:word32] = 0x00;
	Mem17[0x00403610:byte] = 0x00;
	Mem18[0x0040360F:byte] = 0x00;
	Mem20[0x004031CC:byte] = Mem18[0x004031CC:byte] + 0x01;
	return;
}

void fn00401238(word32 edx)
{
	word32 ecx_n = fn004011C2(4207000);
	if (ecx_n >=u 0x07)
	{
		Mem38[0x004031CD:word32] = ecx_n;
		Mem40[fp + ~0x0B:word32] = 4207024;
		if (fn004011C2(4207000) >=u 0x07)
		{
			Mem52[fp + ~0x0B:word32] = edx;
			word32 ecx_n = 0x00;
			do
			{
				Mem61[ecx_n + 4207000:byte] = (byte) (Mem52[ecx_n + 4207000:word32] ^ ecx_n);
				ecx_n = ecx_n + 0x01;
			} while (ecx_n <= Mem61[0x004031CD:word32]);
			Mem70[4207054:word32] = ecx_n;
			Mem75[4207048:word32] = Mem70[0x004035FF:word32];
			fn004011D8();
			Mem81[fs:0x00:word32] = fp + ~0x0F;
			fn004011D8();
			int3();
		}
		else
			return;
	}
	else
		return;
}

